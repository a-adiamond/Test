<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Test</title>
  </head>

  <body>
    <div id="container">
      <div class="inner" id="head">

        <header>
          <h1>Diamond Testing</h1>
          <h2>V0.0.0</h2>
        </header>

        <hr>

        <section id="main_content">
          <div id="g_id_onload"
     data-client_id="195624362128-hjo30na9litda71fphtfp6t0vv04e934.apps.googleusercontent.com"
     data-context="signin"
     data-ux_mode="popup"
     data-callback="confirmAuth()"
     data-auto_prompt="false">
</div>

<div class="g_id_signin"
     data-type="standard"
     data-shape="pill"
     data-theme="outline"
     data-text="signin"
     data-size="large"
     data-logo_alignment="left">
</div>
          <button id="loadDrafts" onclick="execute()" style="display:none"><span>Load Drafts</span></button>
        </section>
      </div>
    </div>
  </body>
          
    <script src="https://apis.google.com/js/api.js"></script>
<script>

  
  var drafts = {};
  
  function confirmAuth() {
    gapi.client.gmail.users.getProfile({
      "userId": "destielreversebang@gmail.com"
    })
        .then(function(response) {
                 document.getElementById("signIn").style.display="none";
                 document.getElementById("loadDrafts").style.display = "block";},
        function(err) { if(err.status=="403") {
                          alert("Invalid sign-in");}
                         else {
                          alert(err.status + ": " + err.result.error.message);}
                      });
    }
    
    
  
  // Make sure the client is loaded and sign-in is complete before calling this method.
  function execute() {
    return gapi.client.gmail.users.drafts.list({
      "userId": "destielreversebang@gmail.com"
    })
        .then(function(response) {
                // Handle the results here (response.result has the parsed body).
                for (var i in response.result.drafts) {
                  var getDraft = response.result.drafts[i].message.id;
                  console.log(getDraft);
                }              },
              function(err) { console.error("Execute error", err); });
  }
</script>

        

</html>
