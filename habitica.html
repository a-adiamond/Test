<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Habitica Stuff</title>
  </head>
  <body onload="getStats()">
    <div id="container">
      <div class="inner" id="head">
        <header>
          <h1>Habitica Stuff</h1>
          <h2>V0.0.3</h2>
        </header>
      </div>
      <hr>
      <section id="main_content" style="width:fit-content; margin:auto">
        <span style="font-size:xx-large">Bulk buy armoire </span><input type="number" id="buyArmoire" style="font-size:xx-large; width:72px" onsubmit="bulkBuyArmoire(0)"><button style="float:none;display:inline;vertical-align: super;" onclick="bulkBuyArmoire(0)">  <span>Buy</span></button><br>
        <span style="font-size:xx-large">Inn <button style="float:none;display:inline;vertical-align: super;" onclick="inn()"><span id="innButt">Check in</span></button>
      </section>
    </div>
  </body>
  <script>
    
    
    var habId = "eb5f51e6-cd0a-4590-b20c-5322bff97cc0";
    var habToken = "7b77d868-365d-484f-87fa-44ca42418238";
    var ntimes = document.getElementById("buyArmoire").value;
    var debug;
    
    var url;
    var sleepTime = 200;
    
    function getStats() {
      url = "https://habitica.com/api/v3/user";
      var xhr = new XMLHttpRequest();
      xhr.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          debug = this.responseText;
        }
      };
      xhr.open('GET',url);
      xhr.setRequestHeader("x-api-user", habId);
      xhr.setRequestHeader("x-api-key", habToken);
      xhr.setRequestHeader("x-client", "eb5f51e6-cd0a-4590-b20c-5322bff97cc0-Testing-Personal");
      xhr.send();
    }
      
    
    function inn() {
      url = "https://habitica.com/api/v3/user/sleep";
      var xhr = new XMLHttpRequest();
      xhr.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          console.log(this.responseText);
        }
      };
      xhr.open('POST',url);
      xhr.setRequestHeader("x-api-user", habId);
      xhr.setRequestHeader("x-api-key", habToken);
      xhr.setRequestHeader("x-client", "eb5f51e6-cd0a-4590-b20c-5322bff97cc0-Testing-Personal");
      xhr.send();
    }
   
    function bulkBuyArmoire(iter) {
    
/*      url = "https://habitica.com/api/v3/user/buy-armoire";
      //set paramaters
      var paramsTemplate = {
        "method" : "post",
        "headers" : {
        "x-api-user" : habId, 
        "x-api-key" : habToken,
        "x-client" : "eb5f51e6-cd0a-4590-b20c-5322bff97cc0-Testing-Personal"
        }
      };
      var params = paramsTemplate;
    
      if (iter < ntimes) {
        var xhr = new XMLHttpRequest();
        xhr.open('POST',url);
        response = fetch(url, params);
        var result = JSON.parse(response);
        console.log(result.message);
        if (result.data.armoire.type == 'food') {
          console.log("You gained " + result.data.armoire.dropText + ".")
        }
        else {
          console.log("You gained " + result.data.armoire.value + " " + result.data.armoire.type + ".")    
        }
        setTimeout(() => {  bulkBuyArmoire(iter+1);}, sleepTime)    }*/
    }
  
  </script>
</html>

